{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/AppState","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"JfCM6WRyn2619+pzBJhEHd1+SSw=","exportNames":["*"],"imports":1}},{"name":"./Sharing","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":99,"index":206}}],"key":"ibDpK2WUQz1lTBf4bwLRN1Y3lfg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useIncomingShare = useIncomingShare;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsAppState = require(_dependencyMap[1], \"react-native-web/dist/exports/AppState\");\n  var AppState = _interopDefault(_reactNativeWebDistExportsAppState);\n  var _Sharing = require(_dependencyMap[2], \"./Sharing\");\n  function sharePayloadsAreEqual(a, b) {\n    if (a.length !== b.length) {\n      return false;\n    }\n    const counts = new Map();\n    const getKey = item => `${item.value}|${item.mimeType}|${item.shareType}`;\n    for (const item of a) {\n      const key = getKey(item);\n      counts.set(key, (counts.get(key) || 0) + 1);\n    }\n    for (const item of b) {\n      const key = getKey(item);\n      const count = counts.get(key);\n      if (!count) {\n        return false;\n      }\n      counts.set(key, count - 1);\n    }\n    return true;\n  }\n  /**\n   * Hook, which returns the data shared with the application and updates the data if the shared payload has changed.\n   */\n  function useIncomingShare() {\n    const [sharedPayloads, setSharedPayloads] = (0, _react.useState)((0, _Sharing.getSharedPayloads)());\n    const [resolvedSharedPayloads, setResolvedSharedPayloads] = (0, _react.useState)([]);\n    const [isResolving, setIsResolving] = (0, _react.useState)(false);\n    const [error, setError] = (0, _react.useState)(null);\n    const currentSharedDataRef = (0, _react.useRef)([]);\n    const refreshSharePayloads = (0, _react.useCallback)(async () => {\n      try {\n        const newSharedData = (0, _Sharing.getSharedPayloads)();\n        // Do not run `getResolvedSharedDataAsync` if the data hasn't changed to reduce network usage\n        if (sharePayloadsAreEqual(newSharedData, currentSharedDataRef.current)) {\n          return;\n        }\n        currentSharedDataRef.current = newSharedData;\n        setSharedPayloads(newSharedData);\n        setResolvedSharedPayloads([]);\n        setError(null);\n        if (newSharedData.length > 0) {\n          setIsResolving(true);\n          try {\n            const resolved = await (0, _Sharing.getResolvedSharedPayloadsAsync)();\n            setResolvedSharedPayloads(resolved);\n          } catch (e) {\n            setError(e instanceof Error ? e : new Error('Unknown error during shared payload resolution'));\n          } finally {\n            setIsResolving(false);\n          }\n        }\n      } catch (e) {\n        setError(e instanceof Error ? e : new Error('Failed to resolve data'));\n      }\n    }, []);\n    (0, _react.useEffect)(() => {\n      refreshSharePayloads();\n      const subscription = AppState.default.addEventListener('change', nextAppState => {\n        if (nextAppState === 'active') {\n          refreshSharePayloads();\n        }\n      });\n      return () => {\n        subscription.remove();\n      };\n    }, [refreshSharePayloads]);\n    return {\n      sharedPayloads,\n      resolvedSharedPayloads,\n      clearSharedPayloads: _Sharing.clearSharedPayloads,\n      isResolving,\n      error,\n      refreshSharePayloads\n    };\n  }\n});","lineCount":92,"map":[[12,2,27,0,"exports"],[12,9,27,0],[12,10,27,0,"useIncomingShare"],[12,26,27,0],[12,29,27,0,"useIncomingShare"],[12,45,27,0],[13,2,1,0],[13,6,1,0,"_react"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,1,65],[14,6,1,65,"_reactNativeWebDistExportsAppState"],[14,40,1,65],[14,43,1,65,"require"],[14,50,1,65],[14,51,1,65,"_dependencyMap"],[14,65,1,65],[15,2,1,65],[15,6,1,65,"AppState"],[15,14,1,65],[15,17,1,65,"_interopDefault"],[15,32,1,65],[15,33,1,65,"_reactNativeWebDistExportsAppState"],[15,67,1,65],[16,2,3,0],[16,6,3,0,"_Sharing"],[16,14,3,0],[16,17,3,0,"require"],[16,24,3,0],[16,25,3,0,"_dependencyMap"],[16,39,3,0],[17,2,4,0],[17,11,4,9,"sharePayloadsAreEqual"],[17,32,4,30,"sharePayloadsAreEqual"],[17,33,4,31,"a"],[17,34,4,32],[17,36,4,34,"b"],[17,37,4,35],[17,39,4,37],[18,4,5,4],[18,8,5,8,"a"],[18,9,5,9],[18,10,5,10,"length"],[18,16,5,16],[18,21,5,21,"b"],[18,22,5,22],[18,23,5,23,"length"],[18,29,5,29],[18,31,5,31],[19,6,6,8],[19,13,6,15],[19,18,6,20],[20,4,7,4],[21,4,8,4],[21,10,8,10,"counts"],[21,16,8,16],[21,19,8,19],[21,23,8,23,"Map"],[21,26,8,26],[21,27,8,27],[21,28,8,28],[22,4,9,4],[22,10,9,10,"getKey"],[22,16,9,16],[22,19,9,20,"item"],[22,23,9,24],[22,27,9,29],[22,30,9,32,"item"],[22,34,9,36],[22,35,9,37,"value"],[22,40,9,42],[22,44,9,46,"item"],[22,48,9,50],[22,49,9,51,"mimeType"],[22,57,9,59],[22,61,9,63,"item"],[22,65,9,67],[22,66,9,68,"shareType"],[22,75,9,77],[22,77,9,79],[23,4,10,4],[23,9,10,9],[23,15,10,15,"item"],[23,19,10,19],[23,23,10,23,"a"],[23,24,10,24],[23,26,10,26],[24,6,11,8],[24,12,11,14,"key"],[24,15,11,17],[24,18,11,20,"getKey"],[24,24,11,26],[24,25,11,27,"item"],[24,29,11,31],[24,30,11,32],[25,6,12,8,"counts"],[25,12,12,14],[25,13,12,15,"set"],[25,16,12,18],[25,17,12,19,"key"],[25,20,12,22],[25,22,12,24],[25,23,12,25,"counts"],[25,29,12,31],[25,30,12,32,"get"],[25,33,12,35],[25,34,12,36,"key"],[25,37,12,39],[25,38,12,40],[25,42,12,44],[25,43,12,45],[25,47,12,49],[25,48,12,50],[25,49,12,51],[26,4,13,4],[27,4,14,4],[27,9,14,9],[27,15,14,15,"item"],[27,19,14,19],[27,23,14,23,"b"],[27,24,14,24],[27,26,14,26],[28,6,15,8],[28,12,15,14,"key"],[28,15,15,17],[28,18,15,20,"getKey"],[28,24,15,26],[28,25,15,27,"item"],[28,29,15,31],[28,30,15,32],[29,6,16,8],[29,12,16,14,"count"],[29,17,16,19],[29,20,16,22,"counts"],[29,26,16,28],[29,27,16,29,"get"],[29,30,16,32],[29,31,16,33,"key"],[29,34,16,36],[29,35,16,37],[30,6,17,8],[30,10,17,12],[30,11,17,13,"count"],[30,16,17,18],[30,18,17,20],[31,8,18,12],[31,15,18,19],[31,20,18,24],[32,6,19,8],[33,6,20,8,"counts"],[33,12,20,14],[33,13,20,15,"set"],[33,16,20,18],[33,17,20,19,"key"],[33,20,20,22],[33,22,20,24,"count"],[33,27,20,29],[33,30,20,32],[33,31,20,33],[33,32,20,34],[34,4,21,4],[35,4,22,4],[35,11,22,11],[35,15,22,15],[36,2,23,0],[37,2,24,0],[38,0,25,0],[39,0,26,0],[40,2,27,7],[40,11,27,16,"useIncomingShare"],[40,27,27,32,"useIncomingShare"],[40,28,27,32],[40,30,27,35],[41,4,28,4],[41,10,28,10],[41,11,28,11,"sharedPayloads"],[41,25,28,25],[41,27,28,27,"setSharedPayloads"],[41,44,28,44],[41,45,28,45],[41,48,28,48],[41,52,28,48,"useState"],[41,58,28,56],[41,59,28,56,"useState"],[41,67,28,56],[41,69,28,57],[41,73,28,57,"getSharedPayloads"],[41,81,28,74],[41,82,28,74,"getSharedPayloads"],[41,99,28,74],[41,101,28,75],[41,102,28,76],[41,103,28,77],[42,4,29,4],[42,10,29,10],[42,11,29,11,"resolvedSharedPayloads"],[42,33,29,33],[42,35,29,35,"setResolvedSharedPayloads"],[42,60,29,60],[42,61,29,61],[42,64,29,64],[42,68,29,64,"useState"],[42,74,29,72],[42,75,29,72,"useState"],[42,83,29,72],[42,85,29,73],[42,87,29,75],[42,88,29,76],[43,4,30,4],[43,10,30,10],[43,11,30,11,"isResolving"],[43,22,30,22],[43,24,30,24,"setIsResolving"],[43,38,30,38],[43,39,30,39],[43,42,30,42],[43,46,30,42,"useState"],[43,52,30,50],[43,53,30,50,"useState"],[43,61,30,50],[43,63,30,51],[43,68,30,56],[43,69,30,57],[44,4,31,4],[44,10,31,10],[44,11,31,11,"error"],[44,16,31,16],[44,18,31,18,"setError"],[44,26,31,26],[44,27,31,27],[44,30,31,30],[44,34,31,30,"useState"],[44,40,31,38],[44,41,31,38,"useState"],[44,49,31,38],[44,51,31,39],[44,55,31,43],[44,56,31,44],[45,4,32,4],[45,10,32,10,"currentSharedDataRef"],[45,30,32,30],[45,33,32,33],[45,37,32,33,"useRef"],[45,43,32,39],[45,44,32,39,"useRef"],[45,50,32,39],[45,52,32,40],[45,54,32,42],[45,55,32,43],[46,4,33,4],[46,10,33,10,"refreshSharePayloads"],[46,30,33,30],[46,33,33,33],[46,37,33,33,"useCallback"],[46,43,33,44],[46,44,33,44,"useCallback"],[46,55,33,44],[46,57,33,45],[46,69,33,57],[47,6,34,8],[47,10,34,12],[48,8,35,12],[48,14,35,18,"newSharedData"],[48,27,35,31],[48,30,35,34],[48,34,35,34,"getSharedPayloads"],[48,42,35,51],[48,43,35,51,"getSharedPayloads"],[48,60,35,51],[48,62,35,52],[48,63,35,53],[49,8,36,12],[50,8,37,12],[50,12,37,16,"sharePayloadsAreEqual"],[50,33,37,37],[50,34,37,38,"newSharedData"],[50,47,37,51],[50,49,37,53,"currentSharedDataRef"],[50,69,37,73],[50,70,37,74,"current"],[50,77,37,81],[50,78,37,82],[50,80,37,84],[51,10,38,16],[52,8,39,12],[53,8,40,12,"currentSharedDataRef"],[53,28,40,32],[53,29,40,33,"current"],[53,36,40,40],[53,39,40,43,"newSharedData"],[53,52,40,56],[54,8,41,12,"setSharedPayloads"],[54,25,41,29],[54,26,41,30,"newSharedData"],[54,39,41,43],[54,40,41,44],[55,8,42,12,"setResolvedSharedPayloads"],[55,33,42,37],[55,34,42,38],[55,36,42,40],[55,37,42,41],[56,8,43,12,"setError"],[56,16,43,20],[56,17,43,21],[56,21,43,25],[56,22,43,26],[57,8,44,12],[57,12,44,16,"newSharedData"],[57,25,44,29],[57,26,44,30,"length"],[57,32,44,36],[57,35,44,39],[57,36,44,40],[57,38,44,42],[58,10,45,16,"setIsResolving"],[58,24,45,30],[58,25,45,31],[58,29,45,35],[58,30,45,36],[59,10,46,16],[59,14,46,20],[60,12,47,20],[60,18,47,26,"resolved"],[60,26,47,34],[60,29,47,37],[60,35,47,43],[60,39,47,43,"getResolvedSharedPayloadsAsync"],[60,47,47,73],[60,48,47,73,"getResolvedSharedPayloadsAsync"],[60,78,47,73],[60,80,47,74],[60,81,47,75],[61,12,48,20,"setResolvedSharedPayloads"],[61,37,48,45],[61,38,48,46,"resolved"],[61,46,48,54],[61,47,48,55],[62,10,49,16],[62,11,49,17],[62,12,50,16],[62,19,50,23,"e"],[62,20,50,24],[62,22,50,26],[63,12,51,20,"setError"],[63,20,51,28],[63,21,51,29,"e"],[63,22,51,30],[63,34,51,42,"Error"],[63,39,51,47],[63,42,51,50,"e"],[63,43,51,51],[63,46,51,54],[63,50,51,58,"Error"],[63,55,51,63],[63,56,51,64],[63,104,51,112],[63,105,51,113],[63,106,51,114],[64,10,52,16],[64,11,52,17],[64,20,53,24],[65,12,54,20,"setIsResolving"],[65,26,54,34],[65,27,54,35],[65,32,54,40],[65,33,54,41],[66,10,55,16],[67,8,56,12],[68,6,57,8],[68,7,57,9],[68,8,58,8],[68,15,58,15,"e"],[68,16,58,16],[68,18,58,18],[69,8,59,12,"setError"],[69,16,59,20],[69,17,59,21,"e"],[69,18,59,22],[69,30,59,34,"Error"],[69,35,59,39],[69,38,59,42,"e"],[69,39,59,43],[69,42,59,46],[69,46,59,50,"Error"],[69,51,59,55],[69,52,59,56],[69,76,59,80],[69,77,59,81],[69,78,59,82],[70,6,60,8],[71,4,61,4],[71,5,61,5],[71,7,61,7],[71,9,61,9],[71,10,61,10],[72,4,62,4],[72,8,62,4,"useEffect"],[72,14,62,13],[72,15,62,13,"useEffect"],[72,24,62,13],[72,26,62,14],[72,32,62,20],[73,6,63,8,"refreshSharePayloads"],[73,26,63,28],[73,27,63,29],[73,28,63,30],[74,6,64,8],[74,12,64,14,"subscription"],[74,24,64,26],[74,27,64,29,"AppState"],[74,35,64,37],[74,36,64,37,"default"],[74,43,64,37],[74,44,64,38,"addEventListener"],[74,60,64,54],[74,61,64,55],[74,69,64,63],[74,71,64,66,"nextAppState"],[74,83,64,78],[74,87,64,83],[75,8,65,12],[75,12,65,16,"nextAppState"],[75,24,65,28],[75,29,65,33],[75,37,65,41],[75,39,65,43],[76,10,66,16,"refreshSharePayloads"],[76,30,66,36],[76,31,66,37],[76,32,66,38],[77,8,67,12],[78,6,68,8],[78,7,68,9],[78,8,68,10],[79,6,69,8],[79,13,69,15],[79,19,69,21],[80,8,70,12,"subscription"],[80,20,70,24],[80,21,70,25,"remove"],[80,27,70,31],[80,28,70,32],[80,29,70,33],[81,6,71,8],[81,7,71,9],[82,4,72,4],[82,5,72,5],[82,7,72,7],[82,8,72,8,"refreshSharePayloads"],[82,28,72,28],[82,29,72,29],[82,30,72,30],[83,4,73,4],[83,11,73,11],[84,6,74,8,"sharedPayloads"],[84,20,74,22],[85,6,75,8,"resolvedSharedPayloads"],[85,28,75,30],[86,6,76,8,"clearSharedPayloads"],[86,25,76,27],[86,27,76,8,"clearSharedPayloads"],[86,35,76,27],[86,36,76,27,"clearSharedPayloads"],[86,55,76,27],[87,6,77,8,"isResolving"],[87,17,77,19],[88,6,78,8,"error"],[88,11,78,13],[89,6,79,8,"refreshSharePayloads"],[90,4,80,4],[90,5,80,5],[91,2,81,0],[92,0,81,1],[92,3]],"functionMap":{"names":["<global>","sharePayloadsAreEqual","getKey","useIncomingShare","refreshSharePayloads","useEffect$argument_0","AppState.addEventListener$argument_1","<anonymous>"],"mappings":"AAA;ACG;mBCK,4DD;CDc;OGI;6CCM;KD4B;cEC;iECE;SDI;eEC;SFE;KFC;CHS"},"hasCjsExports":false},"type":"js/module"}]}